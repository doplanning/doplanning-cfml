var curAreaId=0;var areaWithLink=false;var currentTab="#tab1";function getURLParameterFromPath(name,path){return decodeURIComponent((new RegExp("[?|&]"+name+"=([^&;]+?)(&|#|;|$)").exec(path)||[,""])[1].replace(/\+/g,"%20"))||null}function openUrl(url,target){if(target=="itemIframe"){if(currentTab=="#tab3"){loadIframeSearchItemPage(url)}else{loadIframeItemPage(url)}}else{if(target=="areaIframe"){if(currentTab!="#tab2"){$('#dpTab a[href="#tab2"]').tab("show");iframePage=url;var urAreaId=getURLParameterFromPath("area",url);selectTreeNode(urAreaId)}else{loadIframePage(url)}}else{loadIframePage(url)}}}function getFilename(url){return url.substring(url.lastIndexOf("/")+1)}function loadIframePage(page){$("#areaIframe").attr("src","iframes/"+getFilename(page))}function loadIframeItemPage(page){$("#itemIframe").attr("src","iframes2/"+getFilename(page))}function loadIframeSearchItemPage(page){$("#searchItemIframe").attr("src","iframes2/"+getFilename(page))}function areaIframeLoaded(){}function loadAreaImage(areaId){if(applicationId!="vpnet"){$("#areaImage").attr("src","../app/downloadAreaImage.cfm?id="+areaId)}}function setWithLink(value){areaWithLink=value;if(value==true){$("#areaImageAnchor").css("cursor","pointer")}else{$("#areaImageAnchor").css("cursor","default")}}function goToAreaLink(){if(areaWithLink==true){window.open("../app/goToAreaLink.cfm?id="+curAreaId,"_blank")}}function loadTree(areaId){$("#loadingContainer").show();$("#mainContainer").hide();var noCacheNumber=Math.floor(Math.random()*1001);$("#treeContainer").load("html_content/tree.cfm?n="+noCacheNumber,function(){showTree(true)})}function updateTree(){loadTree("")}function selectTreeNode(nodeId){$("#areasTreeContainer").jstree("select_node","#"+nodeId,true)}function areaSelected(areaId,areaUrl,withLink){curAreaId=areaId;loadAreaImage(areaId);setWithLink(withLink);if(iframePage.length>0){loadIframePage(iframePage);iframePage=""}else{loadIframePage(areaUrl)}$('#dpTab a[href="#tab2"]').tab("show")}function searchTextInTree(){searchInTree(document.getElementById("searchText").value)};