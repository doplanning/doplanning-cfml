/*! Widget: scroller - updated 10/31/2015 (v2.24.0) */
(function(d,c){var b=d.tablesorter,a=b.css;d.extend(b.css,{scrollerWrap:"tablesorter-scroller",scrollerHeader:"tablesorter-scroller-header",scrollerTable:"tablesorter-scroller-table",scrollerFooter:"tablesorter-scroller-footer",scrollerFixed:"tablesorter-scroller-fixed",scrollerFixedPanel:"tablesorter-scroller-fixed-panel",scrollerHasFix:"tablesorter-scroller-has-fixed-columns",scrollerHideColumn:"tablesorter-scroller-hidden-column",scrollerHideElement:"tablesorter-scroller-hidden",scrollerSpacerRow:"tablesorter-scroller-spacer",scrollerBarSpacer:"tablesorter-scroller-bar-spacer",scrollerAddedHeight:"tablesorter-scroller-added-height",scrollerHack:"tablesorter-scroller-scrollbar-hack",scrollerRtl:"ts-scroller-rtl"});b.addWidget({id:"scroller",priority:60,options:{scroller_height:300,scroller_jumpToHeader:true,scroller_upAfterSort:true,scroller_fixedColumns:0,scroller_rowHighlight:"hover",scroller_addFixedOverlay:false,scroller_barWidth:null},format:function(f,g,e){if(!g.isScrolling){b.scroller.setup(g,e)}},remove:function(f,g,e){b.scroller.remove(g,e)}});b.window_resize=function(){if(b.timer_resize){clearTimeout(b.timer_resize)}b.timer_resize=setTimeout(function(){d(c).trigger("resizeEnd")},250)};d(function(){var e="<style>."+a.scrollerWrap+" { position: relative; overflow: hidden; }."+a.scrollerWrap+" * { box-sizing: border-box; }."+a.scrollerHeader+", ."+a.scrollerFooter+" { position: relative; overflow: hidden; }."+a.scrollerHeader+" table."+a.table+" { margin-bottom: 0; }."+a.scrollerTable+" { position: relative; overflow: auto; }."+a.scrollerTable+" table."+a.table+" { border-top: 0; margin-top: 0; margin-bottom: 0; overflow: hidden; }."+a.scrollerTable+" tfoot, ."+a.scrollerHideElement+", ."+a.scrollerHideColumn+" { display: none; }."+a.scrollerFixed+", ."+a.scrollerFixed+" ."+a.scrollerFixedPanel+" { pointer-events: none; }."+a.scrollerFixed+" > div { pointer-events: all; }."+a.scrollerWrap+" ."+a.scrollerFixed+" { position: absolute; top: 0; z-index: 1; left: 0 } ."+a.scrollerWrap+" ."+a.scrollerFixed+"."+a.scrollerRtl+" { left: auto; right: 0 } ."+a.scrollerWrap+"."+a.scrollerHasFix+" > ."+a.scrollerTable+" { overflow: auto; }."+a.scrollerFixed+" ."+a.scrollerFooter+" { position: absolute; bottom: 0; }."+a.scrollerFixed+" ."+a.scrollerTable+" { position: relative; left: 0; overflow: auto; -ms-overflow-style: none; }."+a.scrollerFixed+" ."+a.scrollerTable+"::-webkit-scrollbar { display: none; }."+a.scrollerWrap+" ."+a.scrollerFixedPanel+" { position: absolute; top: 0; bottom: 0; z-index: 2; left: 0; right: 0; } </style>";d(e).appendTo("body")});b.scroller={isFirefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isOldIE:document.all&&!c.atob,isIE:(document.all&&!c.atob)||navigator.appVersion.indexOf("Trident/")>0,isSafari:navigator.userAgent.toLowerCase().indexOf("safari")>-1&&navigator.userAgent.toLowerCase().indexOf("chrome")===-1,hasScrollBar:function(e,f){if(f){return e.get(0).scrollWidth>e.width()}else{return e.get(0).scrollHeight>e.height()}},setWidth:function(e,f){e.css({width:f,"min-width":f,"max-width":f})},getBarWidth:function(){var e=d("<div>").css({position:"absolute",top:"-9999px",left:0,width:"100px",height:"100px",overflow:"scroll",visibility:"hidden"}).appendTo("body"),g=e[0],f=g.offsetWidth-g.clientWidth;e.remove();return f},setup:function(u,i){var h,p,n,t,k,f,l,e,v,j,r=d(c),q=b.scroller,o=u.namespace+"tsscroller",g=d(),s=u.namespace.slice(1)+"tsscroller",m=u.$table;u.widthFixed=true;i.scroller_calcWidths=[];i.scroller_saved=[0,0];i.scroller_isBusy=true;if(i.scroller_barWidth!==null){i.scroller_barSetWidth=i.scroller_barWidth}else{j=q.getBarWidth();i.scroller_barSetWidth=j!==null?j:15}h=i.scroller_height||300;n=d('<table class="'+m.attr("class")+'" cellpadding=0 cellspacing=0>'+m.children("thead")[0].outerHTML+"</table>");i.scroller_$header=n.addClass(u.namespace.slice(1)+"_extra_table");t=m.children("tfoot");if(t.length){g=d('<table class="'+m.attr("class")+'" cellpadding=0 cellspacing=0 style="margin-top:0"></table>').addClass(u.namespace.slice(1)+"_extra_table").append(t.clone(true)).wrap('<div class="'+a.scrollerFooter+'"/>');f=g.children("tfoot").eq(0).children("tr").children()}i.scroller_$footer=g;m.wrap('<div id="'+s+'" class="'+a.scrollerWrap+'" />').before(n).find("."+a.filterRow).addClass(a.filterRowHide);i.scroller_$container=m.parent();if(g.length){m.after(g.parent())}k=n.wrap('<div class="'+a.scrollerHeader+'" />').find("."+a.header);m.wrap('<div class="'+a.scrollerTable+'" style="max-height:'+h+'px;" />');l=m.parent();b.bindEvents(u.table,k);if(m.hasClass("hasFilters")){b.filter.bindSearch(m,n.find("."+a.filter))}m.find("thead").addClass(a.scrollerHideElement);p=l.parent().height();l.off("scroll"+o).on("scroll"+o,function(){if(i.scroller_jumpToHeader){var w=r.scrollTop()-n.offset().top;if(d(this).scrollTop()!==0&&w<p&&w>0){r.scrollTop(n.offset().top)}}n.parent().add(g.parent()).scrollLeft(d(this).scrollLeft())});e=((b.hasWidget(u.table,"filter")?"filterEnd":"tablesorter-initialized updateComplete")+" sortEnd pagerComplete columnUpdate ").split(" ").join(o+" ");m.off(o).on("sortEnd filterEnd".split(" ").join(o+" "),function(w){if(w.type==="sortEnd"&&i.scroller_upAfterSort){l.animate({scrollTop:0},"fast")}else{if(i.scroller_fixedColumns){setTimeout(function(){l.scrollTop(i.scroller_saved[1]).scrollLeft(i.scroller_saved[0]);q.updateFixed(u,i)},0)}}}).on("setFixedColumnSize"+o,function(y,x){var w=i.scroller_$container;if(typeof x!=="undefined"&&!isNaN(x)){i.scroller_fixedColumns=parseInt(x,10)}q.removeFixed(u,i);x=i.scroller_fixedColumns;if(x>0&&x<u.columns-1){q.updateFixed(u,i)}else{if(w.hasClass(a.scrollerHasFix)){w.removeClass(a.scrollerHasFix);q.resize(u,i)}}}).on(e,function(w){if(b.hasWidget("pager")&&w.type==="updateComplete"){return}if(i.scroller_fixedColumns>0){q.updateFixed(u,i)}q.resize(u,i)});r.off("resize resizeEnd ".split(" ").join(o+" ")).on("resize"+o,b.window_resize).on("resizeEnd"+o,function(){r.off("resize"+o,b.window_resize);q.resize(u,i);r.on("resize"+o,b.window_resize);l.trigger("scroll"+o)});u.isScrolling=true;q.updateFixed(u,i);if(u.table.hasInitialized&&u.isScrolling){setTimeout(function(){b.scroller.resize(u,i)},50)}},resize:function(v,h){if(h.scroller_isBusy){return}var k,x,f,l,p,e,r,j,u,q=b.scroller,t=h.scroller_$container,n=v.$table,m=n.parent(),o=h.scroller_$header,g=h.scroller_$footer,s=v.namespace.slice(1)+"tsscroller",w=d("div."+a.scrollerWrap+'[id!="'+s+'"]').addClass(a.scrollerHideElement),i='<tr class="'+a.scrollerSpacerRow+" "+v.selectorRemove.slice(1)+'">';h.scroller_calcWidths=[];q.removeFixed(v,h);t.find("."+a.scrollerSpacerRow).remove();t.find("."+b.css.colgroup).remove();n.find("."+a.scrollerHideElement).removeClass(a.scrollerHideElement);x=parseInt(n.css("border-left-width"),10);r=v.$headerIndexed;for(k=0;k<v.columns;k++){j=r[k];if(j.css("box-sizing")==="border-box"){f=j.outerWidth()}else{if(j.css("border-collapse")==="collapse"){if(j.length&&c.getComputedStyle){f=parseFloat(c.getComputedStyle(j[0],null).width)}else{f=j.outerWidth()-parseFloat(j.css("padding-left"))-parseFloat(j.css("padding-right"))-(parseFloat(j.css("border-width"))||0)}}else{f=j.width()}}i+='<td data-column="'+k+'" style="padding:0;margin:0;border:0;height:0;max-height:0;min-height:0;width:'+f+"px;min-width:"+f+"px;max-width:"+f+'px"></td>';h.scroller_calcWidths[k]=f}i+="</tr>";v.$tbodies.eq(0).prepend(i);o.children("thead").append(i);g.children("tfoot").append(i);b.fixColumnWidth(v.table);i=v.$table.children("colgroup")[0].outerHTML;o.prepend(i);g.prepend(i);u=m.parent().innerWidth()-(q.hasScrollBar(m)?h.scroller_barSetWidth:0);m.width(u);u=(q.hasScrollBar(m)?h.scroller_barSetWidth:0)+x;f=m.innerWidth()-u;o.parent().add(g.parent()).width(f);m.width(f+u);n.children("thead").addClass(a.scrollerHideElement);q.updateFixed(v,h);w.removeClass(a.scrollerHideElement);m.scrollTop(h.scroller_saved[1]);h.scroller_$container.find("."+a.scrollerFixed).find("."+a.scrollerTable).scrollTop(h.scroller_saved[1]);setTimeout(function(){v.$table.triggerHandler("resizableUpdate")},100)},setupFixed:function(i,k){var f,h,p,g,n,l,o,m=i.$table,e=k.scroller_$container,j=k.scroller_fixedColumns;l=e.addClass(a.scrollerHasFix).clone().addClass(a.scrollerFixed).removeClass(a.scrollerWrap).attr("id","");if(k.scroller_addFixedOverlay){l.append('<div class="'+a.scrollerFixedPanel+'">')}o=l.find("."+a.scrollerTable);o.children("table").addClass(i.namespace.slice(1)+"_extra_table").attr("id","").children("thead, tfoot").remove();k.scroller_$fixedColumns=l;if(m.hasClass(a.scrollerRtl)){l.addClass(a.scrollerRtl)}p=l.find("tr");g=p.length;for(f=0;f<g;f++){p.eq(f).children(":gt("+(j-1)+")").remove()}l.addClass(a.scrollerHideElement).prependTo(e);if(i.$table.hasClass("hasFilters")){p=l.find("."+a.filter).not("."+a.filterDisabled).prop("disabled",false);b.filter.bindSearch(m,l.find("."+a.filter));p=e.children("."+a.scrollerHeader).find("."+a.filter);g=p.length;for(f=0;f<g;f++){if(!p.eq(f).hasClass(a.filterDisabled||"disabled")){p.eq(f).prop("disabled",f<j)}}}i.$table.add("."+a.scrollerFooter+" table").children("thead").children("tr."+a.headerRow).children().attr("tabindex",-1);p=k.scroller_$header.add(l.find("."+a.scrollerTable+" table")).children("thead").children("tr."+a.headerRow);g=p.length;for(f=0;f<g;f++){n=p.eq(f).children();for(h=0;h<n.length;h++){n.eq(h).attr("tabindex",h<j?-1:0)}}b.bindEvents(i.table,l.find("."+a.header));b.scroller.bindFixedColumnEvents(i,k);if(b.scroller.isFirefox||b.scroller.isOldIE){o.wrap('<div class="'+a.scrollerHack+'" style="overflow:hidden;">')}},bindFixedColumnEvents:function(l,i){var k=b.scroller,h=l.namespace+"tsscrollerFixed",g="scroll"+h,j=i.scroller_$fixedColumns.find("."+a.scrollerTable),e=true,f=true;l.$table.parent().off(g).on(g,function(){if(i.scroller_isBusy){return}if(!i.scroller_isBusy&&(e||!(k.isFirefox||k.isIE))){f=false;var m=d(this);j[0].scrollTop=i.scroller_saved[1]=m.scrollTop();i.scroller_saved[0]=m.scrollLeft();setTimeout(function(){f=true},20)}});j.off(g).on(g,function(){if(!i.scroller_isBusy&&(f||!(k.isFirefox||k.isIE))){e=false;var m=d(this);l.$table.parent()[0].scrollTop=i.scroller_saved[1]=m.scrollTop();setTimeout(function(){e=true},20)}}).scroll();if(i.scroller_rowHighlight!==""){g="mouseover mouseleave ".split(" ").join(h+" ");l.$table.off(g,"tbody > tr").on(g,"tbody > tr",function(n){var m=l.$table.children("tbody").children("tr").index(this);j.children("table").children("tbody").children("tr").eq(m).add(this).toggleClass(i.scroller_rowHighlight,n.type==="mouseover")});j.find("table").off(g,"tbody > tr").on(g,"tbody > tr",function(o){var m=j.children("table").children("tbody").children("tr"),n=m.index(this);l.$table.children("tbody").children("tr").eq(n).add(this).toggleClass(i.scroller_rowHighlight,o.type==="mouseover")})}},adjustWidth:function(j,h,e,f,g){var i=h.scroller_$container;i.children("."+a.scrollerTable).css(g?"right":"left",e);i.children("."+a.scrollerHeader+", ."+a.scrollerFooter).css(g?"right":"left",e+(g&&b.scroller.isSafari?f:0))},updateFixed:function(H,h){var F,t,E=h.scroller_$container,w=h.scroller_$header,g=h.scroller_$footer,r=H.$table,n=r.parent(),G=h.scroller_barSetWidth,B=r.hasClass(a.scrollerRtl);if(h.scroller_fixedColumns===0){h.scroller_isBusy=false;b.scroller.removeFixed(H,h);F=E.width();n.width(F);t=b.scroller.hasScrollBar(n)?G:0;w.parent().add(g.parent()).width(F-t);return}if(!H.isScrolling){return}h.scroller_isBusy=true;if(!E.find("."+a.scrollerFixed).length){b.scroller.setupFixed(H,h)}var m,x,s,A,e,y,k,v,I,p,l,J=h.scroller_$container.children("."+a.scrollerTable).children("table").children("tbody"),C=h.scroller_$header.children("thead").children("."+a.headerRow),o=h.scroller_$fixedColumns.addClass(a.scrollerHideElement),j=o.find("."+a.scrollerTable).children("table"),D=j.children("tbody"),z=b.scroller,L=h.scroller_fixedColumns,f=r.find("tbody td"),K=parseInt(f.css("border-right-width"),10)||1,u=parseInt((f.css("border-spacing")||"").split(/\s/)[0],10)/2||0,i=parseInt(r.css("padding-left"),10)+parseInt(r.css("padding-right"),10)-K,q=h.scroller_calcWidths;b.scroller.removeFixed(H,h,false);for(m=0;m<L;m++){i+=q[m]+u}i=i+K*2-u;z.setWidth(o.add(o.children()),i);z.setWidth(o.children().children("table"),i);for(x=0;x<H.$tbodies.length;x++){A=J.eq(x);if(A.length){C=A.children();p=C.length;y=b.processTbody(j,D.eq(x),true);y.empty();for(s=0;s<p;s++){e=d(C[s].outerHTML);e.children("td, th").slice(L).remove();y.append(e)}b.processTbody(j,y,false)}}t=b.scroller.hasScrollBar(n)?G:0;if(z.isFirefox||z.isOldIE){j.css("width",i).parent().css("width",i+t)}o.removeClass(a.scrollerHideElement);for(m=0;m<L;m++){E.children("div").children("table").find("th:nth-child("+(m+1)+"), td:nth-child("+(m+1)+")").addClass(a.scrollerHideColumn)}i=i-K;F=n.parent().innerWidth()-i;n.width(F);E.children("."+a.scrollerTable).css(B?"right":"left",i);E.children("."+a.scrollerHeader+", ."+a.scrollerFooter).css(B?"right":"left",i+(B&&b.scroller.isSafari?t:0));w.parent().add(g.parent()).width(F-t);F=b.scroller.hasScrollBar(n,true);t=F?G:0;if(!o.find("."+a.scrollerBarSpacer).length&&F){f=d('<div class="'+a.scrollerBarSpacer+'">').css("height",t+"px");o.find("."+a.scrollerTable).append(f)}else{if(!F){o.find("."+a.scrollerBarSpacer).remove()}}b.scroller.updateRowHeight(H,h);o.height(E.height());o.removeClass(a.scrollerHideElement);h.scroller_isBusy=false},fixHeight:function(k,l){var j,f,g,h,e,m=a.scrollerAddedHeight,i=k.length;for(j=0;j<i;j++){h=k.eq(j);e=l.eq(j);f=h.height();g=e.height();if(f>g){e.addClass(m).height(f)}else{if(f<g){h.addClass(m).height(g)}}}},updateRowHeight:function(i,h){var g,f,e=h.scroller_$fixedColumns;h.scroller_$container.find("."+a.scrollerAddedHeight).removeClass(a.scrollerAddedHeight).height("");g=h.scroller_$header.children("thead").children("tr");f=e.children("."+a.scrollerHeader).children("table").children("thead").children("tr");b.scroller.fixHeight(g,f);g=h.scroller_$footer.children("tfoot").children("tr");f=e.children("."+a.scrollerFooter).children("table").children("tfoot").children("tr");b.scroller.fixHeight(g,f);if(b.scroller.isFirefox||b.scroller.isOldIE){e=e.find("."+a.scrollerHack)}g=i.$table.children("tbody").children("tr");f=e.children("."+a.scrollerTable).children("table").children("tbody").children("tr");b.scroller.fixHeight(g,f)},removeFixed:function(j,g,h){var f=j.$table,i=g.scroller_$container,e=f.hasClass(a.scrollerRtl);if(h||typeof h==="undefined"){i.find("."+a.scrollerFixed).remove()}i.find("."+a.scrollerHideColumn).removeClass(a.scrollerHideColumn);i.children(":not(."+a.scrollerFixed+")").css(e?"right":"left",0)},remove:function(h,g){var e=g.scroller_$container,f=h.namespace+"tsscroller";h.$table.off(f);d(c).off(f);if(e){h.$table.insertBefore(e).find("thead").removeClass(a.scrollerHideElement).children("tr."+a.headerRow).children().attr("tabindex",0).end().find("."+a.filterRow).removeClass(a.scrollerHideElement+" "+a.filterRowHide);h.$table.find("."+a.filter).not("."+a.filterDisabled).prop("disabled",false);e.remove();h.isScrolling=false}}}})(jQuery,window);